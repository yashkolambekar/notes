# Next

## React Server Components

Server components are rendered on the server side, these are mostly used to make data requests to the server, but they cannot have hooks or interact with users using the window and other such methods.

In next js we have to include the string `"use client"` at the top of each component to show that the component is a client component and not a server component

## Routing

Routing in Nextjs is the PHP way, we have to define all the routes in the `src/app` folder, and the folder names will be the path names, each folder/path should have a `page.jsx` or `page.tsx` file which will be it's default file

### Dynamic Routes

To define a dynamic route, we have to name the folder in a special way, in closed square brackets

`[username]`

and then, in the page file, we get a params object which contains the route path under the folder name key

```jsx
const UserProfile = ({ params }) => {
  return (
    <>
      <p>Your username is {params.username}</p>
    </>
  );
};
```

We can also have multiple levels of nesting in the dynamic routes, we just have to make sure that we are not mixing the folder names, that we do not have any duplicates, we can access all the dynamic routes in the params object.

### Catchall route

We can have a catch all using three dots in front of the dynamic route folder name like this -> `[...path]` and we can access it using params, we will be returned with an object which will have the key, path here, which will contain array of paths (basically url seperated at `\`)

### 404 page

We can declare a `not-found.jsx` page in the app directory and it will be served for all the 404 errors instead of the default page.

We can also have different 404 pages on different paths, declared in the same way

### Route groups

If we want to store some of our routes together but do not want add an extra suffix in the path, we can do it by naming the group folder like `(namehere)`, the name will not be added in the url, for example

`/src/app/(auth)/login/page.jsx` will be rendered on `/login`

## Metadata

We can export the metadata object in a page.jsx file or layout.jsx file, the layout.jsx metadata will be used by default and if we get two metadata at layout and page, they will be combined, if we get clashes, page metadata will be used in that place

```js
export const metadata = {
  title: "My First App",
  description: "Generated by Next.js",
};
```

> We cannot export metadata from a client side component!

## Redirecting and Navigation

The `<Link>` component is provided by NextJS which can be used to make SPA style redirects without having to relaod the page

### Redirecting using program

```jsx
const router = useRouter();
router.push("/target");
```

we have 
- push
- replace
- back
- forward

### Template vs Layout

Layouts preserve the states and other variables, they do not refresh the common components, hence giving better performance, to avoid this behaviour, we can rename layout.jsx to template.jsx


### Parallel routes

Instead of having components as the children of a page, we can have their own paages and then next them in to the page, those children pages will not be available to anyone.

To do it, we have to define the folders with `@` suffix, for examplse, `@status`, `@graphs`, etc.

We can access them in layout.tsx props with the names status and graphs

### searchParameters

We can get searchParameters prop in component to get the query parameters of the request URL, it returns an object which has key value pairs of argument name and their values.